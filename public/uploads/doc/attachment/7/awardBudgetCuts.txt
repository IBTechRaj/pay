#https://www.linkedin.com/in/jmkitavi/
def find_grants_cap(grantsArray, newBudget)
  # your code goes here 
  return if grantsArray.length === 0
  n=grantsArray.length
  grantsArray=grantsArray.sort.reverse
  grantsArray.push(0)
  #for grant in grantsArray1
    #puts grant
  #end
  sum=0
  grantsArray.each{|n|
    sum+=n
    puts n
    }
  puts sum
  surplus=sum - newBudget
  if surplus <= 0https://www.linkedin.com/in/jmkitavi
    return grantsArray[0]
  end
  for i in 0..grantsArray.length-1
    surplus-=(i+1) * (grantsArray[i]-grantsArray[i+1])
    print [grantsArray[i], grantsArray[i+1]]
    puts surplus
    if surplus <= 0
      break
    end
  end
  return grantsArray[i+1] + (-surplus /Float(i+1))
  #cap = spareFunds / ((grantsArray.length) -1) #+ grantsArray[0]
  ##puts sum, spareFunds
  #puts grantsArray.length
 # puts grantsArray[0]
end

find_grants_cap([2,100,50,120,1000],190)